"use strict";var __awaiter=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function u(e){try{a(r.next(e))}catch(e){o(e)}}function d(e){try{a(r.throw(e))}catch(e){o(e)}}function a(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(u,d)}a((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});class BaseModel{constructor(e,t){this.conn=e,this.target=t}create(e){return __awaiter(this,void 0,void 0,function*(){return yield this.conn.getRepository(this.target).save(e)})}update(e,t){return __awaiter(this,void 0,void 0,function*(){return yield this.conn.createQueryBuilder().update(this.target).set(t).where("id=:id",{id:e}).execute()})}delete(e){return __awaiter(this,void 0,void 0,function*(){return yield this.conn.createQueryBuilder().update(this.target).set({isDeleted:1}).where("id=:id",{id:e}).execute()})}remove(e){return __awaiter(this,void 0,void 0,function*(){return yield this.conn.createQueryBuilder().delete().from(this.target).where("id=:id",{id:e}).execute()})}queryById(e){return __awaiter(this,void 0,void 0,function*(){return yield this.conn.getRepository(this.target).createQueryBuilder().where("id=:id",{id:e}).getOne()})}count(){return __awaiter(this,void 0,void 0,function*(){return yield this.conn.getRepository(this.target).count()})}}exports.default=BaseModel;